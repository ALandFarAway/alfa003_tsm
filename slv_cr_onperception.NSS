////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ACR Configuration File
//     Filename : acf_cre_onperception
//    $Revision:: 280        $ current version of the file
//        $Date:: 2007-03-20#$ date the file was created or modified
//       Author : Cipher
//
//    Var Prefix:
//  Dependencies:
//
//  Description
//  This script calls the ACR's OnPerception event handler for creatures
//  and any custom code a server may need. It is not updated in ACR updates.
//
//  Revision History
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#include "acr_creature_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//
void main()
{
   	if((GetTag(OBJECT_SELF) == "003_cr_bookwyrm_bae") && (GetLocalInt(GetLastPerceived(), "Perceived" + GetTag(OBJECT_SELF)) != 1))
			{object oBae = GetLastPerceived();
			 string sBaeName = GetName(oBae);
			 ActionSpeakString(sBaeName, TALKVOLUME_TALK);
			 if((GetIsPC(oBae)) || (GetIsDMPossessed(oBae)))
				{if((FindSubString(sBaeName, "Bae", 0) != -1) || (FindSubString(sBaeName, "Wynna", 0) != -1))
				 	{
					 DelayCommand(1.0, ActionForceMoveToLocation(GetLocation(oBae), FALSE, 30.0));
					 //ActionForceMoveToObject(oBae, TRUE, 0.0);
					 }
				}
			SetLocalInt(oBae, "Perceived" + GetTag(OBJECT_SELF), 1);
			}
			
	if((GetTag(OBJECT_SELF) == "003_cr_slv_studgen1")  && (GetLocalInt(GetLastPerceived(), "Perceived" + GetTag(OBJECT_SELF)) != 1))
			{object oOlivus = GetLastPerceived();
			 string sOlivusName = GetName(oOlivus);
			 ActionSpeakString(sOlivusName, TALKVOLUME_TALK);
			 int nHiOlivus = GetLocalInt(OBJECT_SELF, "Olivus");
			 if((GetIsPC(oOlivus)) || (GetIsDMPossessed(oOlivus)))
				{if((FindSubString(sOlivusName, "Olivu", 0) != -1) || (FindSubString(sOlivusName, "Wynna", 0) != -1))
				 	{if(nHiOlivus == 0) {
					 	ActionForceMoveToObject(oOlivus, TRUE, 3.0);
					 	DelayCommand(4.0, ActionSpeakString("Hello, Olivus.", TALKVOLUME_TALK));
					 	DelayCommand(5.0, ActionMoveAwayFromObject(oOlivus, FALSE, 40.0)); 
						SetLocalInt(OBJECT_SELF, "Olivus", 1);
						}
					}
				}
			SetLocalInt(oOlivus, "Perceived" + GetTag(OBJECT_SELF), 1);
			}

}